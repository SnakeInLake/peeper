{
  "apiVersion": "grizzly.grafana.com/v1alpha1",
  "kind": "Dashboard",
  "metadata": {
    "folder": "eccm-services",
    "name": "rabbitmq"
  },
  "spec": {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations \u0026 Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "description": "A new RabbitMQ Management Overview",
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 1,
    "links": [
      {
        "icon": "doc",
        "tags": [],
        "targetBlank": true,
        "title": "Monitoring with Prometheus \u0026 Grafana",
        "tooltip": "",
        "type": "link",
        "url": "https://www.rabbitmq.com/prometheus.html"
      }
    ],
    "panels": [
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Общее количество сообщений в состоянии *ready* (готовых к доставке).\n\nЭто количество показывает, сколько сообщений ожидает потребителей и готово к обработке.\n\nРекомендуется поддерживать это значение как можно ниже, так как постоянный рост может указывать на узкое место в потребителях, что в итоге приведёт к переполнению памяти и диска.\n\nДля управления ростом очередей рассмотрите использование ограничений длины очереди (Queue Length Limit) или времени жизни сообщений (TTL).\n\n* [Очереди (Queues)](https://www.rabbitmq.com/queues.html)\n* [Потребители (Consumers)](https://www.rabbitmq.com/consumers.html)\n* [Ограничение длины очереди (Queue Length Limit)](https://www.rabbitmq.com/maxlength.html)\n* [Время жизни сообщений (TTL)](https://www.rabbitmq.com/ttl.html)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#37872D"
                },
                {
                  "color": "#1F60C4",
                  "value": 10000
                },
                {
                  "color": "#C4162A",
                  "value": 100000
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 6,
          "x": 0,
          "y": 0
        },
        "id": 64,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rabbitmq_queue_messages_ready{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", host=\"$host\"})",
            "format": "time_series",
            "hide": false,
            "instant": false,
            "interval": "",
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Ready messages",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Скорость входящих сообщений.\n\nПоказывает количество сообщений, поступающих в RabbitMQ за секунду, до применения каких-либо правил маршрутизации.\n\nВысокие значения указывают на активность отправителей сообщений. Если скорость поступления сообщений значительно выше скорости доставки, это может привести к росту очередей и повышенной нагрузке на систему.\n\n* [Издатели (Publishers)](https://www.rabbitmq.com/publishers.html)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#C4162A"
                },
                {
                  "color": "#1F60C4",
                  "value": -1
                },
                {
                  "color": "#37872D",
                  "value": 50
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 6,
          "x": 6,
          "y": 0
        },
        "id": 62,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rate(rabbitmq_channel_messages_published_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\"})",
            "format": "time_series",
            "instant": false,
            "interval": "",
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Incoming messages / s",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Общее количество активных каналов, связанных с издателями (publishers).\n\nРасчёт ведётся как разница между общим числом открытых каналов и числом каналов, используемых потребителями (consumers), что позволяет оценить активность издателей сообщений.\n\nРост этого показателя может свидетельствовать об увеличении количества приложений, публикующих сообщения, или о возможных утечках каналов.\n\nРекомендуется мониторить вместе с метриками потребителей и каналов для выявления дисбаланса и проблем с ресурсами.\n\n* [Каналы (Channels)](https://www.rabbitmq.com/channels.html)\n* [Издатели (Publishers)](https://www.rabbitmq.com/publishers.html)\n* [Потребители (Consumers)](https://www.rabbitmq.com/consumers.html)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#C4162A"
                },
                {
                  "color": "#1F60C4",
                  "value": 0
                },
                {
                  "color": "#37872D",
                  "value": 10
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 12,
          "y": 0
        },
        "id": 66,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rabbitmq_channels{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) - sum(rabbitmq_channel_consumers{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
            "format": "time_series",
            "instant": false,
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Publishers",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Общее количество клиентских подключений к RabbitMQ.\n\nЭта метрика показывает число активных соединений, через которые клиенты взаимодействуют с брокером.\n\nРост количества соединений может указывать на увеличение нагрузки или потенциальные утечки соединений в приложениях.\n\nРекомендуется контролировать эту метрику вместе с показателями открытия и закрытия соединений для выявления аномалий.\n\n* [Подключения (Connections)](https://www.rabbitmq.com/connections.html)\n* [Мониторинг соединений](https://www.rabbitmq.com/connections.html#monitoring)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#C4162A"
                },
                {
                  "color": "#1F60C4",
                  "value": 0
                },
                {
                  "color": "#37872D",
                  "value": 10
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 16,
          "y": 0
        },
        "id": 37,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rabbitmq_connections{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
            "format": "time_series",
            "instant": false,
            "interval": "",
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Connections",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "бщее количество очередей RabbitMQ.\n\nЭта метрика помогает отслеживать распределение и количество активных очередей в кластере.\n\nРезкий рост или падение количества очередей может свидетельствовать о изменениях в нагрузке, конфигурации или возникновении проблем с производительностью.\n\nРекомендуется контролировать эту метрику вместе с другими показателями очередей для комплексного мониторинга.\n\n* [Очереди (Queues)](https://www.rabbitmq.com/queues.html)\n* [Высокодоступные очереди (HA Queues)](https://www.rabbitmq.com/ha.html)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#C4162A"
                },
                {
                  "color": "#1F60C4",
                  "value": 0
                },
                {
                  "color": "#37872D",
                  "value": 10
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 20,
          "y": 0
        },
        "id": 40,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rabbitmq_queues{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
            "format": "time_series",
            "instant": false,
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Queues",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Общее количество сообщений, доставленных потребителям, но ещё не подтверждённых ими (unacknowledged).\n\nЭти сообщения считаются «в полёте» — они либо обрабатываются потребителями, либо ожидают подтверждения. Высокое значение может указывать на задержки в обработке или проблемы с потребителями.\n\nДля оптимизации работы рассмотрите настройки подтверждений сообщений и мониторинг потребителей.\n\n* [Очереди (Queues)](https://www.rabbitmq.com/queues.html)\n* [Подтверждения сообщений (Confirms and Acknowledgements)](https://www.rabbitmq.com/confirms.html)\n* [Префетч (Consumer Prefetch)](https://www.rabbitmq.com/consumer-prefetch.html)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#37872D"
                },
                {
                  "color": "#1F60C4",
                  "value": 100
                },
                {
                  "color": "#C4162A",
                  "value": 500
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 6,
          "x": 0,
          "y": 3
        },
        "id": 65,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rabbitmq_queue_messages_unacked * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
            "format": "time_series",
            "hide": false,
            "instant": false,
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Unacknowledged messages",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Общая скорость исходящих сообщений, включая:\n\n* Сообщения, доставленные потребителям (в том числе повторные доставки);\n* Подтверждённые сообщения;\n* Операции выборки сообщений потребителями (polling).\n\nЭтот показатель отражает интенсивность отдачи сообщений потребителям и показывает, насколько активно потребители обрабатывают сообщения.\n\nВысокие значения могут указывать на хорошую скорость обработки, однако слишком большое количество повторных доставок может свидетельствовать о проблемах с потребителями.\n\nРекомендуется мониторить баланс между входящими и исходящими сообщениями для поддержания стабильной работы.\n\n* [Потребители (Consumers)](https://www.rabbitmq.com/consumers.html)\n* [Подтверждения сообщений (Confirms and Acknowledgements)](https://www.rabbitmq.com/confirms.html)\n* [Повторные доставки (Redeliveries)](https://www.rabbitmq.com/confirms.html#consumer-nacks-requeue)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#C4162A"
                },
                {
                  "color": "#1F60C4",
                  "value": -1
                },
                {
                  "color": "#37872D",
                  "value": 50
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 6,
          "x": 6,
          "y": 3
        },
        "id": 63,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rate(rabbitmq_channel_messages_redelivered_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\nsum(rate(rabbitmq_channel_messages_delivered_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\nsum(rate(rabbitmq_channel_messages_delivered_ack_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\",rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\nsum(rate(rabbitmq_channel_get_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\nsum(rate(rabbitmq_channel_get_ack_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
            "format": "time_series",
            "hide": false,
            "instant": false,
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Outgoing messages / s",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Общее количество потребителей (consumers), подключенных к узлу `$host` в кластере `$rabbitmq_cluster`.\n\nЭта метрика отражает число активных каналов, через которые потребители получают сообщения из очередей.\n\nМониторинг количества потребителей помогает оценить нагрузку на систему и эффективность обработки сообщений.\n\nРекомендуется отслеживать вместе с метриками издателей и очередей для выявления дисбаланса или проблем с потреблением.\n\n* [Потребители (Consumers)](https://www.rabbitmq.com/consumers.html)\n* [Каналы (Channels)](https://www.rabbitmq.com/channels.html)\n* [Очереди (Queues)](https://www.rabbitmq.com/queues.html)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#C4162A"
                },
                {
                  "color": "#1F60C4",
                  "value": 0
                },
                {
                  "color": "#37872D",
                  "value": 10
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 12,
          "y": 3
        },
        "id": 41,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rabbitmq_channel_consumers{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
            "format": "time_series",
            "instant": false,
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Consumers",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Общее количество открытых каналов (channels).\n\nКаналы — это легковесные виртуальные соединения внутри TCP-соединения, используемые для обмена сообщениями между клиентами и брокером.\n\nРост количества каналов может свидетельствовать о повышенной активности приложений или потенциальных утечках ресурсов.\n\nРекомендуется отслеживать совместно с метриками открытых и закрытых каналов для выявления аномалий.\n\n* [Каналы (Channels)](https://www.rabbitmq.com/channels.html)\n* [Утечки каналов](https://www.rabbitmq.com/channels.html#channel-leaks)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#C4162A"
                },
                {
                  "color": "#1F60C4",
                  "value": 0
                },
                {
                  "color": "#37872D",
                  "value": 10
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 16,
          "y": 3
        },
        "id": 38,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rabbitmq_channels{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
            "format": "time_series",
            "instant": false,
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Channels",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Общее количество узлов RabbitMQ.\n\nДанный показатель отражает число активных нод, участвующих в кластере.\n\nМониторинг количества узлов позволяет отслеживать состояние кластера и выявлять возможные отклонения, связанные с отключениями или добавлением новых нод.\n\n* [Кластеризация RabbitMQ](https://www.rabbitmq.com/clustering.html)\n* [Мониторинг узлов](https://www.rabbitmq.com/monitoring.html)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "#1F60C4"
                },
                {
                  "color": "#37872D",
                  "value": 3
                },
                {
                  "color": "#C4162A",
                  "value": 8
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 4,
          "x": 20,
          "y": 3
        },
        "id": 67,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "background",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "text": {},
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rabbitmq_build_info{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
            "format": "time_series",
            "instant": false,
            "intervalFactor": 1,
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Nodes",
        "type": "stat"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 6
        },
        "id": 4,
        "panels": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Показывает информацию о версиях и сборках RabbitMQ ",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "align": "auto",
                  "cellOptions": {
                    "type": "auto"
                  },
                  "inspect": false
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "erlang_version"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Erlang/OTP"
                    },
                    {
                      "id": "unit",
                      "value": "none"
                    },
                    {
                      "id": "custom.align"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "rgba(50, 172, 45, 0.97)"
                          },
                          {
                            "color": "rgba(237, 129, 40, 0.89)"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "rabbitmq_version"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "RabbitMQ"
                    },
                    {
                      "id": "unit",
                      "value": "none"
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "custom.align"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "rgba(245, 54, 54, 0.9)"
                          },
                          {
                            "color": "rgba(237, 129, 40, 0.89)"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "instance"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Host"
                    },
                    {
                      "id": "unit",
                      "value": "short"
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "custom.align"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "rabbitmq_node"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Node name"
                    },
                    {
                      "id": "unit",
                      "value": "short"
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "custom.align"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "rgba(245, 54, 54, 0.9)"
                          },
                          {
                            "color": "rgba(237, 129, 40, 0.89)"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Time"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "short"
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "custom.align"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "short"
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "custom.align"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "job"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "short"
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "custom.align"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "rabbitmq_cluster"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Cluster"
                    },
                    {
                      "id": "unit",
                      "value": "short"
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "custom.align"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "prometheus_client_version"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "prometheus.erl"
                    },
                    {
                      "id": "unit",
                      "value": "short"
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "custom.align"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "prometheus_plugin_version"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "rabbitmq_prometheus"
                    },
                    {
                      "id": "unit",
                      "value": "short"
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "custom.align"
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 3,
              "w": 24,
              "x": 0,
              "y": 7
            },
            "id": 69,
            "options": {
              "cellHeight": "sm",
              "footer": {
                "countRows": false,
                "fields": "",
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "showHeader": true
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "rabbitmq_build_info{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}",
                "format": "table",
                "instant": true,
                "intervalFactor": 1,
                "refId": "A"
              }
            ],
            "title": "",
            "transformations": [
              {
                "id": "merge",
                "options": {
                  "reducers": []
                }
              }
            ],
            "type": "table"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Если значение равно нулю или меньше, сработает тревога по памяти, и все соединения на публикацию сообщений во всех узлах кластера будут заблокированы.\n\nЗначение может временно стать отрицательным, так как срабатывание тревоги происходит с небольшой задержкой.\n\nОценка используемой памяти ядром операционной системы может отличаться от той, что видит сам узел. Из-за этого значение может оставаться отрицательным в течение длительного времени.\n\nПо умолчанию узлы считают используемую память по размеру резидентного набора (RSS). Этот метод можно изменить (см. ссылки ниже).\n\n* [Тревоги](https://www.rabbitmq.com/alarms.html)\n* [Тревоги по памяти](https://www.rabbitmq.com/memory.html)\n* [Анализ использования памяти](https://www.rabbitmq.com/memory-use.html)\n* [Уведомления о заблокированных соединениях](https://www.rabbitmq.com/connection-blocked.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "decimals": 1,
                "links": [],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red"
                    },
                    {
                      "color": "orange",
                      "value": 0
                    },
                    {
                      "color": "transparent",
                      "value": 536870912
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 85
            },
            "id": 7,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "asc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "(rabbitmq_resident_memory_limit_bytes{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) -\n(rabbitmq_process_resident_memory_bytes{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Memory available before publishers blocked",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Эта метрика отображается для раздела диска, на котором хранится каталог данных RabbitMQ.\n\nЕсли значение равно нулю или меньше, сработает тревога по дисковому пространству, и все соединения для публикации сообщений на всех узлах кластера будут заблокированы.\n\nЗначение может временно стать отрицательным, так как тревога по свободному месту на диске срабатывает с небольшой задержкой.\n\n* [Тревоги](https://www.rabbitmq.com/alarms.html)\n* [Тревоги по дисковому пространству](https://www.rabbitmq.com/disk-alarms.html)\n* [Дисковое пространство](https://www.rabbitmq.com/production-checklist.html#resource-limits-disk-space)\n* [Настройка персистентности](https://www.rabbitmq.com/persistence-conf.html)\n* [Уведомления о заблокированных соединениях](https://www.rabbitmq.com/connection-blocked.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "decimals": 1,
                "links": [],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red"
                    },
                    {
                      "color": "orange",
                      "value": 1073741824
                    },
                    {
                      "color": "transparent",
                      "value": 5368709120
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 8,
              "w": 8,
              "x": 12,
              "y": 85
            },
            "id": 8,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "asc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "rabbitmq_disk_space_available_bytes{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Disk space available before publishers blocked",
            "type": "timeseries"
          },
          {
            "datasource": {
              "uid": "peeper-metrics"
            },
            "description": "Когда это значение достигает нуля, новые подключения не принимаются, а операции записи на диск могут завершиться с ошибкой.\n\nКлиентские библиотеки, другие узлы кластера и командная строка не смогут подключиться к узлу, если на нём закончились доступные файловые дескрипторы.\n\n* [Ограничение на количество открытых файлов](https://www.rabbitmq.com/production-checklist.html#resource-limits-file-handle-limit)\n",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": []
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": []
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": []
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": []
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": []
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": []
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": []
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": []
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": []
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": []
                }
              ]
            },
            "gridPos": {
              "h": 4,
              "w": 4,
              "x": 20,
              "y": 85
            },
            "id": 2,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "asc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "editorMode": "code",
                "expr": "(rabbitmq_process_max_fds{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) -\n(rabbitmq_process_open_fds{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
                "legendFormat": "{{rabbitmq_node}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "File descriptors available",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Когда это значение достигает нуля, новые подключения не принимаются.\n\nКлиентские библиотеки, другие узлы кластера и инструменты командной строки не смогут подключиться к узлу, если на нём закончились доступные файловые дескрипторы.\n\n* [Сетевое взаимодействие и RabbitMQ](https://www.rabbitmq.com/networking.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "decimals": -1,
                "links": [],
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red"
                    },
                    {
                      "color": "orange",
                      "value": 500
                    },
                    {
                      "color": "transparent",
                      "value": 1000
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 4,
              "w": 4,
              "x": 20,
              "y": 89
            },
            "id": 5,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "asc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "(rabbitmq_process_max_tcp_sockets{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) -\n(rabbitmq_process_open_tcp_sockets{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "TCP sockets available",
            "type": "timeseries"
          }
        ],
        "title": "NODES",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 7
        },
        "id": 27,
        "panels": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Общее количество готовых сообщений, ожидающих доставки потребителям.\n\nСтарайтесь удерживать это значение как можно ниже. RabbitMQ работает наиболее эффективно, когда сообщения непрерывно проходят через него. Допустимо, если издатели (publishers) временами опережают потребителей, но предполагается, что потребители в итоге обработают все готовые сообщения.\n\nЕсли это значение постоянно растёт, система в конечном итоге исчерпает доступную память и/или дисковое пространство. Рассмотрите возможность использования TTL или ограничения длины очереди, чтобы предотвратить неконтролируемый рост количества сообщений.\n\n* [Очереди](https://www.rabbitmq.com/queues.html)\n* [Потребители](https://www.rabbitmq.com/consumers.html)\n* [Ограничение длины очереди](https://www.rabbitmq.com/maxlength.html)\n* [Время жизни и срок действия сообщений (TTL)](https://www.rabbitmq.com/ttl.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 8
            },
            "id": 9,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rabbitmq_queue_messages_ready{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages ready to be delivered to consumers",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Общее количество сообщений, находящихся «в пути» к потребителям, в процессе обработки потребителями или ожидающих подтверждения от потребителей, которое ещё не было обработано очередью. Пока очередь не обработает подтверждение (ack), сообщение будет считаться неподтверждённым.\n\n* [Очереди](https://www.rabbitmq.com/queues.html)\n* [Подтверждения и подтверждения доставки](https://www.rabbitmq.com/confirms.html)\n* [Предзагрузка сообщений потребителем (Consumer Prefetch)](https://www.rabbitmq.com/consumer-prefetch.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 12,
              "y": 8
            },
            "id": 19,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rabbitmq_queue_messages_unacked{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages pending consumer acknowledgement",
            "type": "timeseries"
          }
        ],
        "title": "QUEUED MESSAGES",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 8
        },
        "id": 11,
        "panels": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость входящих сообщений до применения каких-либо правил маршрутизации.\n\nЕсли это значение меньше, чем количество сообщений, доставленных в очереди, это может означать, что некоторые сообщения попадают сразу в несколько очередей.\n\nЕсли это значение больше, чем количество сообщений, доставленных в очереди, это означает, что сообщения не могут быть маршрутизированы и будут либо отброшены, либо возвращены издателю.\n\n* [Издатели (Publishers)](https://www.rabbitmq.com/publishers.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 9
            },
            "id": 13,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_messages_published_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages published / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость подтверждения сообщений брокером для издателей. Издатели должны явно включить получение подтверждений (publisher confirms).\n\nЕсли эта метрика стабильно равна нулю, это может указывать на то, что клиенты не используют подтверждения сообщений. В этом случае сохранность опубликованных сообщений может быть под угрозой.\n\n* [Подтверждения от издателя (Publisher Confirms)](https://www.rabbitmq.com/confirms.html#publisher-confirms)\n* [Подтверждения и надёжность доставки данных](https://www.rabbitmq.com/publishers.html#data-safety)\n* [Когда брокер подтверждает доставку сообщений?](https://www.rabbitmq.com/confirms.html#when-publishes-are-confirmed)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 12,
              "y": 9
            },
            "id": 18,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_messages_confirmed_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages confirmed to publishers / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость сообщений, полученных от издателей и успешно маршрутизированных в мастер-реплики очередей.\n\n* [Очереди](https://www.rabbitmq.com/queues.html)\n* [Издатели](https://www.rabbitmq.com/publishers.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 69
            },
            "id": 61,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_queue_messages_published_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages routed to queues / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость сообщений, полученных от издателей с включёнными подтверждениями (publisher confirms), которые брокер ещё не подтвердил.\n\n* [Издатели](https://www.rabbitmq.com/publishers.html)\n* [Подтверждения и подтверждения доставки](https://www.rabbitmq.com/confirms.html)\n* [Когда брокер подтверждает публикацию сообщений?](https://www.rabbitmq.com/confirms.html#when-publishes-are-confirmed)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 12,
              "y": 69
            },
            "id": 12,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_messages_unconfirmed{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages unconfirmed to publishers / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость сообщений, которые не удалось маршрутизировать и которые были отброшены.\n\nЛюбое значение выше нуля означает потерю сообщений и, вероятно, указывает на проблему с маршрутизацией на стороне издателя.\n\n* [Обработка не маршрутизируемых сообщений](https://www.rabbitmq.com/publishers.html#unroutable)\n",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 100,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "red",
                      "value": 0
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/rabbit/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#C4162A",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 74
            },
            "id": 34,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_messages_unroutable_dropped_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Unroutable messages dropped / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость сообщений, которые не удалось маршрутизировать и которые возвращаются обратно издателям.\n\nПостоянные значения выше нуля могут указывать на проблему с маршрутизацией на стороне издителя.\n\n* [Обработка не маршрутизируемых сообщений](https://www.rabbitmq.com/publishers.html#unroutable)\n* [Когда брокер подтверждает публикацию сообщений?](https://www.rabbitmq.com/confirms.html#when-publishes-are-confirmed)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 100,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "red",
                      "value": 0
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/rabbit/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#C4162A",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 12,
              "y": 74
            },
            "id": 16,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_messages_unroutable_returned_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Unroutable messages returned to publishers / s",
            "type": "timeseries"
          }
        ],
        "title": "INCOMING MESSAGES",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 9
        },
        "id": 29,
        "panels": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость сообщений, доставленных потребителям. Включает повторно доставленные сообщения.\n\nЭта метрика не учитывает сообщения, полученные потребителями с помощью `basic.get` (потребление через опрос).\n\n* [Потребители](https://www.rabbitmq.com/consumers.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 10
            },
            "id": 14,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(\n  (rate(rabbitmq_channel_messages_delivered_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) +\n  (rate(rabbitmq_channel_messages_delivered_ack_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"})\n) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages delivered / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость сообщений, которые были повторно доставлены потребителям. Включает сообщения, автоматически помещённые обратно в очередь, а также повторные доставки из-за исключений каналов или разрывов соединения.\n\nНебольшое количество повторных доставок — это нормально, но если эта метрика постоянно ненулевая, стоит разобраться в причинах.\n\n* [Отрицательные подтверждения и повторное помещение сообщений в очередь](https://www.rabbitmq.com/confirms.html#consumer-nacks-requeue)\n* [Потребители](https://www.rabbitmq.com/consumers.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "orange",
                      "value": 20
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 12,
              "y": 10
            },
            "id": 15,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_messages_redelivered_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages redelivered / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость доставки сообщений потребителям, использующим режим ручного подтверждения (manual acknowledgement).\n\nПри использовании этого режима RabbitMQ ожидает подтверждения от потребителей, прежде чем доставить им новые сообщения.\n\nЭто самый безопасный способ потребления сообщений.\n\n* [Подтверждения потребителей](https://www.rabbitmq.com/confirms.html)\n* [Предзагрузка сообщений потребителем (Consumer Prefetch)](https://www.rabbitmq.com/consumer-prefetch.html)\n* [Режимы подтверждения, предзагрузка и пропускная способность](https://www.rabbitmq.com/confirms.html#channel-qos-prefetch-throughput)\n* [Потребители](https://www.rabbitmq.com/consumers.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 30
            },
            "id": 20,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_messages_delivered_ack_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages delivered with manual ack / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость доставки сообщений потребителям, использующим режим автоматического подтверждения (automatic acknowledgement).\n\nВ этом режиме RabbitMQ не ждёт подтверждений от потребителей о доставке сообщений.\n\nЭтот режим «отправил и забыл» не обеспечивает гарантий доставки. Он обычно обеспечивает более высокую пропускную способность, но может привести к перегрузке потребителей и увеличению их потребления памяти.\n\n* [Режимы подтверждения, предзагрузка и пропускная способность](https://www.rabbitmq.com/confirms.html#channel-qos-prefetch-throughput)\n* [Потребители](https://www.rabbitmq.com/consumers.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 12,
              "y": 30
            },
            "id": 21,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_messages_delivered_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages delivered auto ack / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость подтверждений сообщений, поступающих от потребителей, использующих режим ручного подтверждения (manual acknowledgement).\n\n* [Подтверждения потребителей](https://www.rabbitmq.com/confirms.html)\n* [Предзагрузка сообщений потребителем (Consumer Prefetch)](https://www.rabbitmq.com/consumer-prefetch.html)\n* [Режимы подтверждения, предзагрузка и пропускная способность](https://www.rabbitmq.com/confirms.html#channel-qos-prefetch-throughput)\n* [Потребители](https://www.rabbitmq.com/consumers.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 0,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 35
            },
            "id": 22,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_messages_acked_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Messages acknowledged / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость доставки сообщений потребителям с опросом, использующим режим автоматического подтверждения.\n\nИспользование потребителей с опросом крайне неэффективно и поэтому настоятельно не рекомендуется.\n\n* [Получение отдельных сообщений](https://www.rabbitmq.com/consumers.html#fetching)\n* [Потребители](https://www.rabbitmq.com/consumers.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 100,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "red",
                      "value": 0
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/rabbit/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#C4162A",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 12,
              "y": 35
            },
            "id": 24,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_get_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Polling operations with auto ack / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость операций опроса потребителей, которые не возвращают результатов.\n\nЛюбое значение выше нуля означает, что ресурсы RabbitMQ тратятся впустую из-за таких потребителей.\n\nСравните эту метрику с другими метриками опроса потребителей, чтобы оценить уровень неэффективности.\n\nИспользование потребителей с опросом крайне неэффективно и настоятельно не рекомендуется.\n\n* [Получение отдельных сообщений](https://www.rabbitmq.com/consumers.html#fetching)\n* [Потребители](https://www.rabbitmq.com/consumers.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 100,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "red",
                      "value": 0
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/rabbit/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#C4162A",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 40
            },
            "id": 25,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_get_empty_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Polling operations that yield no result / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость доставки сообщений потребителям с опросом, использующим режим ручного подтверждения.\n\nИспользование потребителей с опросом крайне неэффективно и поэтому настоятельно не рекомендуется.\n\n* [Получение отдельных сообщений](https://www.rabbitmq.com/consumers.html#fetching)\n* [Потребители](https://www.rabbitmq.com/consumers.html)\n",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 100,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "red",
                      "value": 0
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/rabbit/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#C4162A",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 12,
              "y": 40
            },
            "id": 23,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channel_get_ack_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Polling operations with manual ack / s",
            "type": "timeseries"
          }
        ],
        "title": "OUTGOING MESSAGES",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 10
        },
        "id": 53,
        "panels": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Общее количество мастеров очередей на узел.\n\nЭта метрика помогает быстро выявить не оптимальное распределение очередей в кластере.\n\n* [Мастера очередей, локальность данных](https://www.rabbitmq.com/ha.html#master-migration-data-locality)\n* [Очереди](https://www.rabbitmq.com/queues.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": -1,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 11
            },
            "id": 57,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "rabbitmq_queues{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}",
                "format": "time_series",
                "instant": false,
                "interval": "",
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Total queues",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость создания очередей клиентами.\n\nНебольшие стабильные значения выше нуля являются нормой. Высокие значения могут указывать на частое создание и удаление очередей или высокий уровень восстановления соединений. Для подтверждения уровня восстановления соединений используйте метрику *Connections opened*.\n\n* [Очереди](https://www.rabbitmq.com/queues.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "orange",
                      "value": 2
                    },
                    {
                      "color": "red",
                      "value": 10
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 12,
              "y": 11
            },
            "id": 58,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_queues_declared_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Queues declared / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость создания новых очередей (в отличие от повторных объявлений).\n\nНебольшие стабильные значения выше нуля являются нормой. Высокие значения могут указывать на частое создание и удаление очередей или высокий уровень восстановления соединений. Для подтверждения уровня восстановления соединений используйте метрику *Connections opened*.\n\n* [Очереди](https://www.rabbitmq.com/queues.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "orange",
                      "value": 2
                    },
                    {
                      "color": "red",
                      "value": 10
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 16,
              "y": 11
            },
            "id": 60,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_queues_created_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Queues created / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость удаления очередей.\n\nНебольшие стабильные значения выше нуля являются нормой. Высокие значения могут указывать на частое создание и удаление очередей или высокий уровень восстановления соединений. Для подтверждения уровня восстановления соединений используйте метрику *Connections opened*.\n\n* [Очереди](https://www.rabbitmq.com/queues.html)\n",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "orange",
                      "value": 2
                    },
                    {
                      "color": "red",
                      "value": 10
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 4,
              "x": 20,
              "y": 11
            },
            "id": 59,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_queues_deleted_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Queues deleted / s",
            "type": "timeseries"
          }
        ],
        "title": "QUEUES",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 11
        },
        "id": 51,
        "panels": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Общее количество каналов на всех текущих открытых соединениях.\n\nЕсли эта метрика монотонно растёт, это с большой вероятностью указывает на утечку каналов в одном из приложений. Подтвердите утечки каналов, используя метрики *Channels opened* и *Channels closed*.\n\n* [Утечки каналов](https://www.rabbitmq.com/channels.html#channel-leaks)\n* [Каналы](https://www.rabbitmq.com/channels.html)",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": -1,
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 12,
              "x": 0,
              "y": 12
            },
            "id": 54,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "rabbitmq_channels{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Total channels",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость открытия новых каналов приложениями по всем соединениям. Ожидается, что каналы будут долгоживущими.\n\nНебольшие стабильные значения выше нуля являются нормой. Высокие значения могут указывать на частое создание и закрытие каналов или массовое восстановление соединений. Для подтверждения уровня восстановления соединений используйте метрику *Connections opened*.\n\n* [Высокая смена каналов](https://www.rabbitmq.com/channels.html#high-channel-churn)\n* [Каналы](https://www.rabbitmq.com/channels.html)\n",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "orange",
                      "value": 2
                    },
                    {
                      "color": "red",
                      "value": 10
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 12,
              "y": 12
            },
            "id": 55,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channels_opened_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Channels opened / s",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "description": "Скорость закрытия каналов приложениями по всем соединениям. Ожидается, что каналы будут долгоживущими.\n\nНебольшие стабильные значения выше нуля являются нормой. Высокие значения могут указывать на частое открытие и закрытие каналов или массовое восстановление соединений. Для подтверждения уровня восстановления соединений используйте метрику *Connections opened*.\n\n* [Высокая смена каналов](https://www.rabbitmq.com/channels.html#high-channel-churn)\n* [Каналы](https://www.rabbitmq.com/channels.html)\n",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisBorderShow": false,
                  "axisCenteredZero": false,
                  "axisColorMode": "text",
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "barWidthFactor": 0.6,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "insertNulls": false,
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "normal"
                  },
                  "thresholdsStyle": {
                    "mode": "line+area"
                  }
                },
                "links": [],
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "transparent"
                    },
                    {
                      "color": "orange",
                      "value": 2
                    },
                    {
                      "color": "red",
                      "value": 10
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#56A64B",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#F2CC0C",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#3274D9",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#A352CC",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FF780A",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#96D98D",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFEE52",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#8AB8FF",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#CA95E5",
                        "mode": "fixed"
                      }
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byRegexp",
                    "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
                  },
                  "properties": [
                    {
                      "id": "color",
                      "value": {
                        "fixedColor": "#FFB357",
                        "mode": "fixed"
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 5,
              "w": 6,
              "x": 18,
              "y": 12
            },
            "id": 56,
            "options": {
              "alertThreshold": true,
              "legend": {
                "calcs": [
                  "lastNotNull",
                  "max",
                  "min"
                ],
                "displayMode": "list",
                "placement": "bottom",
                "showLegend": false
              },
              "tooltip": {
                "hideZeros": false,
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "12.0.2",
            "targets": [
              {
                "datasource": {
                  "uid": "${datasource}"
                },
                "editorMode": "code",
                "expr": "sum(rate(rabbitmq_channels_closed_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
                "format": "time_series",
                "instant": false,
                "intervalFactor": 1,
                "legendFormat": "{{rabbitmq_node}}",
                "refId": "A"
              }
            ],
            "title": "Channels closed / s",
            "type": "timeseries"
          }
        ],
        "title": "CHANNELS",
        "type": "row"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 12
        },
        "id": 46,
        "panels": [],
        "title": "CONNECTIONS",
        "type": "row"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Если эта метрика монотонно растёт, это с большой вероятностью указывает на утечку соединений в одном из приложений. Подтвердите утечки соединений, используя метрики *Connections opened* и *Connections closed*.\n\n* [Утечки соединений](https://www.rabbitmq.com/connections.html#monitoring)\n* [Соединения](https://www.rabbitmq.com/connections.html)\n",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "normal"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "decimals": -1,
            "links": [],
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#56A64B",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#F2CC0C",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#3274D9",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#A352CC",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#FF780A",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#96D98D",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#FFEE52",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#8AB8FF",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#CA95E5",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#FFB357",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 5,
          "w": 12,
          "x": 0,
          "y": 13
        },
        "id": 47,
        "options": {
          "alertThreshold": true,
          "legend": {
            "calcs": [
              "lastNotNull",
              "max",
              "min"
            ],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "rabbitmq_connections{host=\"$host\"} * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}",
            "format": "time_series",
            "instant": false,
            "intervalFactor": 1,
            "legendFormat": "{{rabbitmq_node}}",
            "refId": "A"
          }
        ],
        "title": "Total connections",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Скорость открытия новых соединений клиентами. Ожидается, что соединения будут долгоживущими.\n\nНебольшие стабильные значения выше нуля являются нормой. Высокие значения могут указывать на частое открытие и закрытие соединений или массовое восстановление соединений.\n\n* [Утечки соединений](https://www.rabbitmq.com/connections.html#monitoring)\n* [Соединения](https://www.rabbitmq.com/connections.html)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "normal"
              },
              "thresholdsStyle": {
                "mode": "line+area"
              }
            },
            "links": [],
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "transparent"
                },
                {
                  "color": "orange",
                  "value": 2
                },
                {
                  "color": "red",
                  "value": 10
                }
              ]
            },
            "unit": "short"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#56A64B",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#F2CC0C",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#3274D9",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#A352CC",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#FF780A",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#96D98D",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#FFEE52",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#8AB8FF",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#CA95E5",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#FFB357",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 5,
          "w": 6,
          "x": 12,
          "y": 13
        },
        "id": 48,
        "options": {
          "alertThreshold": true,
          "legend": {
            "calcs": [
              "lastNotNull",
              "max",
              "min"
            ],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rate(rabbitmq_connections_opened_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
            "format": "time_series",
            "instant": false,
            "interval": "",
            "intervalFactor": 1,
            "legendFormat": "{{rabbitmq_node}}",
            "refId": "A"
          }
        ],
        "title": "Connections opened / s",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Скорость закрытия соединений. Ожидается, что соединения будут долгоживущими.\n\nНебольшие стабильные значения выше нуля являются нормой. Высокие значения могут указывать на частое открытие и закрытие соединений или массовое восстановление соединений.\n\n* [Соединения](https://www.rabbitmq.com/connections.html)",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "normal"
              },
              "thresholdsStyle": {
                "mode": "line+area"
              }
            },
            "links": [],
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "transparent"
                },
                {
                  "color": "orange",
                  "value": 2
                },
                {
                  "color": "red",
                  "value": 10
                }
              ]
            },
            "unit": "short"
          },
          "overrides": [
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?0(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#56A64B",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?1(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#F2CC0C",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?2(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#3274D9",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?3(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#A352CC",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?4(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#FF780A",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?5(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#96D98D",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?6(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#FFEE52",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?7(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#8AB8FF",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?8(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#CA95E5",
                    "mode": "fixed"
                  }
                }
              ]
            },
            {
              "matcher": {
                "id": "byRegexp",
                "options": "/^rabbit@[a-zA-Z\\.\\-]*?9(\\b|\\.)/"
              },
              "properties": [
                {
                  "id": "color",
                  "value": {
                    "fixedColor": "#FFB357",
                    "mode": "fixed"
                  }
                }
              ]
            }
          ]
        },
        "gridPos": {
          "h": 5,
          "w": 6,
          "x": 18,
          "y": 13
        },
        "id": 49,
        "options": {
          "alertThreshold": true,
          "legend": {
            "calcs": [
              "lastNotNull",
              "max",
              "min"
            ],
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": false
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "desc"
          }
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "uid": "${datasource}"
            },
            "editorMode": "code",
            "expr": "sum(rate(rabbitmq_connections_closed_total{host=\"$host\"}[60s]) * on(instance) group_left(rabbitmq_cluster, rabbitmq_node) rabbitmq_identity_info{host=\"$host\", rabbitmq_cluster=\"$rabbitmq_cluster\", namespace=\"$namespace\"}) by(rabbitmq_node)",
            "format": "time_series",
            "instant": false,
            "intervalFactor": 1,
            "legendFormat": "{{rabbitmq_node}}",
            "refId": "A"
          }
        ],
        "title": "Connections closed / s",
        "type": "timeseries"
      }
    ],
    "preload": false,
    "refresh": "5s",
    "schemaVersion": 41,
    "tags": [
      "rabbitmq-prometheus"
    ],
    "templating": {
      "list": [
        {
          "current": {
            "text": "Zolotovskiy-ECCM-100-devices",
            "value": "Zolotovskiy-ECCM-100-devices"
          },
          "definition": "label_values({app=\"eccm\"},host)",
          "label": "host",
          "name": "host",
          "options": [],
          "query": {
            "qryType": 1,
            "query": "label_values({app=\"eccm\"},host)",
            "refId": "VariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": "",
            "value": ""
          },
          "definition": "label_values(rabbitmq_identity_info{host=\"$host\"},namespace)",
          "label": "Namespace",
          "name": "namespace",
          "options": [],
          "query": {
            "qryType": 1,
            "query": "label_values(rabbitmq_identity_info{host=\"$host\"},namespace)",
            "refId": "VariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        },
        {
          "current": {
            "text": "rabbit@6938dd972eb4",
            "value": "rabbit@6938dd972eb4"
          },
          "definition": "label_values(rabbitmq_identity_info{namespace=\"$namespace\", host=\"$host\"},rabbitmq_cluster)",
          "label": "RabbitMQ Cluster",
          "name": "rabbitmq_cluster",
          "options": [],
          "query": {
            "qryType": 1,
            "query": "label_values(rabbitmq_identity_info{namespace=\"$namespace\", host=\"$host\"},rabbitmq_cluster)",
            "refId": "VariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-10m",
      "to": "now"
    },
    "timepicker": {
      "refresh_intervals": [
        "5s",
        "10s",
        "30s",
        "1m",
        "5m"
      ]
    },
    "timezone": "browser",
    "title": "RabbitMQ Overview",
    "uid": "rabbitmq"
  }
}