{
  "apiVersion": "grizzly.grafana.com/v1alpha1",
  "kind": "AlertRuleGroup",
  "metadata": {
    "name": "eccm.eccm"
  },
  "spec": {
    "folderUid": "eccm",
    "interval": 60,
    "rules": [
      {
        "annotations": {
          "description": "Событие возникает, когда какой-либо сервис переходит в состоянии DOWN.",
          "summary": "Сервис {{ $labels.container }} находится в состоянии DOWN."
        },
        "condition": "C",
        "data": [
          {
            "datasourceUid": "peeper-metrics",
            "model": {
              "editorMode": "code",
              "expr": "up",
              "intervalMs": 1000,
              "legendFormat": "__auto",
              "maxDataPoints": 43200,
              "range": true,
              "refId": "A"
            },
            "refId": "A",
            "relativeTimeRange": {
              "from": 600
            }
          },
          {
            "datasourceUid": "__expr__",
            "model": {
              "conditions": [
                {
                  "evaluator": {
                    "params": [
                      0,
                      0
                    ],
                    "type": "gt"
                  },
                  "operator": {
                    "type": "and"
                  },
                  "query": {
                    "params": []
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                }
              ],
              "datasource": {
                "name": "Expression",
                "type": "__expr__",
                "uid": "__expr__"
              },
              "expression": "A",
              "intervalMs": 1000,
              "maxDataPoints": 43200,
              "reducer": "last",
              "refId": "B",
              "settings": {
                "mode": ""
              },
              "type": "reduce"
            },
            "refId": "B",
            "relativeTimeRange": {
              "from": 600
            }
          },
          {
            "datasourceUid": "__expr__",
            "model": {
              "conditions": [
                {
                  "evaluator": {
                    "params": [
                      1,
                      0
                    ],
                    "type": "lt"
                  },
                  "operator": {
                    "type": "and"
                  },
                  "query": {
                    "params": []
                  },
                  "reducer": {
                    "params": [],
                    "type": "avg"
                  },
                  "type": "query"
                }
              ],
              "datasource": {
                "name": "Expression",
                "type": "__expr__",
                "uid": "__expr__"
              },
              "expression": "B",
              "intervalMs": 1000,
              "maxDataPoints": 43200,
              "refId": "C",
              "type": "threshold"
            },
            "refId": "C",
            "relativeTimeRange": {}
          }
        ],
        "execErrState": "Alerting",
        "folderUID": "eccm",
        "for": "1m0s",
        "id": 12,
        "labels": {
          "org": "eltex"
        },
        "noDataState": "Alerting",
        "orgID": 1,
        "ruleGroup": "eccm",
        "title": "Service down",
        "uid": "benfpns7d4s1sd",
        "updated": "2025-07-25T19:09:21.000+07:00"
      }
    ],
    "title": "eccm"
  }
}