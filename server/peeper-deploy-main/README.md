# Peeper

## Документация

Внутренняя техническая документация:
https://intdocs.eltex.loc/display/WIFI/Peeper

Документация для клиента: < В работе >

## Краткое описание

Peeper - система мониторинга Eltex, созданная на базе OpenSource продуктов, которая предназначена для мониторинга
         всех программных продуктов Eltex и окружающей их инфраструктуры (Linux, Databases).

На данный момент Peeper поддерживает мониторинг:
- Linux
- Softswitch

### Структура

Решение состоит из 2 частей:

client - устанавливается на хосте, где работает приложение, с которого собираются метрики мониторинга. Базово состоит
         из сервиса telegraf, который собирает всевозможные метрики с хоста и приложений с помощью различных inputs 
         плагинов и отправляет их по http в сторону центрального сервера

server - устанавливается на центральном хосте, куда все метрики отправляются с клиентских хостов, 
         хранятся и визуализируются. Состоит из серверного telegraf, который принимает все метрики от клиентских хостов
         по HTTP, Prometheus, который забирает метрики из Telegraf и хранит их, Grafana, которая визуализирует метрики
         в преднастроенных дашбордах и отправляет алерты с помощью встроенного Alert-manager.

## Запуск

На хостах должны быть установлены docker и docker compose: https://docs.docker.com/engine/install/ubuntu/

Скопировать папку server на серверный хост и client на клиентский хост

Скорректировать .env :

    server - указать токен бота, ID чата Telegram, IP или домен сервера с Grafana

    client - указать адрес server хоста и уникальный строковый Hostname, идентифицирующий
             клиентский хост

Выполнить  docker compose up -d  на хосте с client и хосте с server
