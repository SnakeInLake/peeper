{
  "title": "PSQL (Fixed)",
  "apiVersion": "grizzly.grafana.com/v1alpha1",
  "kind": "Dashboard",
  "metadata": {
    "folder": "system",
    "name": "postgres"
  },
  "spec": {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations \u0026 Alerts",
          "type": "dashboard"
        }
      ]
    },
    "description": "This dashboard works with postgres_exporter",
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 1,
    "links": [],
    "panels": [
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 34,
        "panels": [],
        "title": "General Counters, CPU, Memory and File Descriptor Stats",
        "type": "row"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Версия базы данных PostgreSQL",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 4,
          "x": 0,
          "y": 1
        },
        "id": 36,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "value",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "mean"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "name",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_static{release=\"$release\",source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "{{short_version}}",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Version",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Время запуска docker-контейнера \"postgres-exporter\". Данный контейнер отправляет данные с клиента на сервер",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "dateTimeFromNow"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 4,
          "x": 4,
          "y": 1
        },
        "id": 28,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "mean"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_postmaster_start_time_seconds{release=\"$release\",source_host=\"$dbms\"} * 1000",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Start Time",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Объем считанных блоков данных из базы данных. Необходимо для мониторинга эффективности кеширования и оценки нагрузки на базу данных. Использовать до 70% от доступного объема кэша во избежание перегрузки системы",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "decbytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 4,
          "x": 8,
          "y": 1
        },
        "id": 10,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "sum(pg_stat_database_tup_fetched{datname=~\"$datname\",source_host=~\"$dbms\"})",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Current fetch data",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Количество данных, записываемых в БД. Необходимо для отслеживания нагрузки на запись и выявление проблем с диском. Использовать до 70% от доступного объема диска во избежание переполнения дискового пространства",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 4,
          "x": 12,
          "y": 1
        },
        "id": 11,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "sum(\n  pg_stat_database_tup_inserted{\n    release=\"$release\",datname=~\"$datname\",source_host=~\"$dbms\"\n  }\n)",
            "format": "time_series",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Current insert data",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Объем обновления данных в базе данных. Необходимо для отслеживания интенсивности изменений и нагрузки на диски. Использовать до 70% от доступного объема диска во избежание перегрузки дисковой подсистемы",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 4,
          "x": 16,
          "y": 1
        },
        "id": 12,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "sum(pg_stat_database_tup_updated{datname=~\"$datname\",source_host=~\"$dbms\"})",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Current update data",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Максимальное количество клиентов, которые могут подключиться к PostgreSQL одновременно",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 2,
          "w": 4,
          "x": 20,
          "y": 1
        },
        "id": 38,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "mean"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_max_connections{release=\"$release\",source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Max Connections",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Средняя загрузка центрального процессора каждые 5 минут. Помогает выявлять перегрузку сервера. Использовать до 80% от доступной мощности CPU во избежание перегрева и перегрузки системы",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "s"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 0,
          "y": 3
        },
        "id": 22,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "max",
              "min"
            ],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "avg(\n  rate(process_cpu_seconds_total{release=\"$release\",source_host=\"$dbms\"}[5m])\n    *\n  1000\n)",
            "legendFormat": "CPU Time",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Average CPU Usage",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Среднее использование виртуальной и постоянной памяти в байтах каждые 5 минут. Использовать до 75% от доступной оперативной памяти во избежание свопинга",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "decbytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 8,
          "y": 3
        },
        "id": 24,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "max",
              "min"
            ],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "avg(\n  rate(\n    process_resident_memory_bytes{release=\"$release\",source_host=\"$dbms\"}[5m]\n  )\n)",
            "format": "time_series",
            "legendFormat": "Resident Mem",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "avg(\n  rate(\n    process_virtual_memory_bytes{release=\"$release\",source_host=\"$dbms\"}[5m]\n  )\n)",
            "legendFormat": "Virtual Mem",
            "range": true,
            "refId": "B"
          }
        ],
        "title": "Average Memory Usage",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Количество открытых файловых дескрипторов (уникальных идентификаторов файлов/ресурсов в ОС). Нужен для мониторинга, чтобы избежать утечки дескрипторов и перегрузки системы. Использовать до 80% от настройки \"max_files_per_process\" во избежание перегрузки системы",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 8,
          "x": 16,
          "y": 3
        },
        "id": 26,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "max",
              "min"
            ],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "process_open_fds{release=\"$release\",source_host=\"$dbms\"}",
            "legendFormat": "Open FD",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Open File Descriptors",
        "type": "timeseries"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 10
        },
        "id": 32,
        "panels": [],
        "title": "Settings",
        "type": "row"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Объем оперативной памяти, выделенной базой данных для кэширования. Нужна для мониторинга и настройки производительности СУБД, чтобы убедиться, что сервер эффективно использует память",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 0,
          "y": 11
        },
        "id": 40,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_shared_buffers_bytes{source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Shared Buffers",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Предполагаемый максимальный объем памяти, доступный для кеширования данных файловой системой и дисками. Нужна для оптимизации запросов, чтобы PostgreSQL корректно оценивал стоимость операций ввода-вывода при планировании выполнения",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 3,
          "y": 11
        },
        "id": 42,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_effective_cache_size_bytes{source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Effective Cache",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Объём памяти, выделенный PostgreSQL для операций обслуживания (VACUUM, CREATE INDEX и др.). Метрика нужна для контроля и настройки памяти, чтобы тяжёлые фоновые задачи не конкурировали с основными запросами за ресурсы.",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 6,
          "y": 11
        },
        "id": 44,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_maintenance_work_mem_bytes{source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Maintenance Work Mem",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Объём памяти, выделяемый PostgreSQL для операций сортировки и хеширования при выполнении отдельных запросов. Нужна для балансировки производительности: слишком маленькое значение замедляет сложные запросы, а слишком большое — может привести к избыточному потреблению памяти при множестве одновременных операций",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 9,
          "y": 11
        },
        "id": 46,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_work_mem_bytes{source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Work Mem",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Максимальный размер WAL-журналов (журнал предварительной записи), используемых PostgreSQL для обеспечения надежности данных в базе данных. Нужна для контроля дискового пространства и настройки баланса между производительностью записи и безопасностью данных",
        "fieldConfig": {
          "defaults": {
            "decimals": 1,
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 12,
          "y": 11
        },
        "id": 48,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_max_wal_size_bytes{source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Max WAL Size",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Стоимость произвольного доступа к данным на диске при планировании запросов или условный коэффициент, используемый для сравнения операции произвольного доступа к диску относительно последовательного чтения данных. Нужна данная метрика для оптимизации работы планировщика PostgreSQL, помогая выбирать наиболее эффективные планы выполнения запросов в зависимости от типа хранилища (HDD/SSD)",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 3,
          "x": 15,
          "y": 11
        },
        "id": 50,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_random_page_cost{source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Random Page Cost",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Стоимость последовательного чтения данных с диска при планировании запросов. Является основной единицей при оценке стоимости других операций.",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 2,
          "x": 18,
          "y": 11
        },
        "id": 52,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_seq_page_cost{source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Seq Page Cost",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Максимальное количество фоновых процессов, которые PostgreSQL может использовать для параллельных операций",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 2,
          "x": 20,
          "y": 11
        },
        "id": 54,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "mean"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_max_worker_processes{source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Max Worker Processes",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Максимальное количество параллельных воркеров (потоки, выполняющие задачи по обработке запросов), которые могут использоваться для выполнения одного запроса. Нужна данная метрика для управления степенью параллелизма при обработке сложных запросов и оптимизации нагрузки на систему.",
        "fieldConfig": {
          "defaults": {
            "mappings": [
              {
                "options": {
                  "match": "null",
                  "result": {
                    "text": "N/A"
                  }
                },
                "type": "special"
              }
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 3,
          "w": 2,
          "x": 22,
          "y": 11
        },
        "id": 56,
        "maxDataPoints": 100,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "horizontal",
          "percentChangeColorMode": "standard",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showPercentChange": false,
          "textMode": "auto",
          "wideLayout": true
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "exemplar": false,
            "expr": "pg_settings_max_parallel_workers{source_host=\"$dbms\"}",
            "instant": true,
            "legendFormat": "__auto",
            "range": false,
            "refId": "A"
          }
        ],
        "title": "Max Parallel Workers",
        "type": "stat"
      },
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 14
        },
        "id": 30,
        "panels": [],
        "title": "Database Stats",
        "type": "row"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Количество активных подключений к базам данных PostgreSQL в реальном времени. Нужна метрика для мониторинга нагрузки на сервер БД и выявления потенциальных проблем с подключениями. Использовать до 85% от настройки \"Максимальное количество подключений\" во избежание перегрузки сервера",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "points",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "always",
              "spanNulls": true,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "decimals": 0,
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "none"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 12,
          "x": 0,
          "y": 15
        },
        "id": 1,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "max"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "sum(\n  pg_stat_activity_count{\n    datname=~\"$datname\",source_host=~\"$dbms\",state=\"active\"\n  }\n) by(datname,instance,state)\n  !=\n0",
            "format": "time_series",
            "legendFormat": "{{datname}}, s: {{state}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Active sessions",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Количество блокировок разных типов (пессимистические, оптимистические, строчные и др.) в базах данных PostgreSQL. Нужна данная метрика для мониторинга конфликтов доступа к данным и выявления потенциальных проблем с параллельными транзакциями.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "decimals": 0,
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 7,
          "w": 12,
          "x": 12,
          "y": 15
        },
        "id": 3,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "sum"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "sum(\n  pg_locks_count{datname=~\"$datname\",source_host=~\"$dbms\",mode=~\"$mode\"}\n) by(datname,instance,mode)\n  !=\n0",
            "legendFormat": "{{datname}},{{mode}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Lock tables",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Состояния подключений к базе данных PostgreSQL. Он используется для получения количества подключений в различных состояниях (idle, idle in transaction, idle in transaction (aborted)) для указанных баз данных (eccm, postgres, template0, template1) с интервалом в 10 секунд.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 9,
          "w": 12,
          "x": 0,
          "y": 22
        },
        "id": 4,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "lastNotNull",
              "max"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "sum(\n  pg_stat_activity_count{\n    datname=~\"$datname\",\n    source_host=~\"$dbms\",\n    state=~\"idle|idle in transaction|idle in transaction (aborted)\"\n  }\n) by(datname,instance,state)",
            "legendFormat": "{{datname}}, s: {{state}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Idle sessions",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Скорость транзакций в базе данных PostgreSQL. Используется для получения данных о количестве транзакций в секунду для указанных баз данных (eccm, postgres, template0, template1) с интервалом в 10 секунд. Использовать до 70% от максимальной пропускной способности системы, чтобы избежать перегрузки CPU и дисковой подсистемы",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 9,
          "w": 12,
          "x": 12,
          "y": 22
        },
        "id": 60,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "sum"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(\n  pg_stat_database_xact_commit{source_host=\"$dbms\",datname=~\"$datname\"}[5m]\n)",
            "legendFormat": "{{datname}} commits",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(\n  pg_stat_database_xact_rollback{source_host=\"$dbms\",datname=~\"$datname\"}[5m]\n)",
            "legendFormat": "{{datname}} rollbacks",
            "range": true,
            "refId": "B"
          }
        ],
        "title": "Transactions",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Количество строк, добавленных в таблицы базы данных PostgreSQL.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 12,
          "x": 0,
          "y": 31
        },
        "id": 6,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "sum"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "pg_stat_database_tup_inserted{datname=~\"$datname\",source_host=~\"$dbms\"} != 0",
            "legendFormat": "{{datname}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Insert data",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Количество строк, полученных из баз данных PostgreSQL. Метрика используется для мониторинга активности запросов и выявления потенциальных проблем с производительностью",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 12,
          "x": 12,
          "y": 31
        },
        "id": 5,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "sum"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "pg_stat_database_tup_fetched{datname=~\"$datname\",source_host=~\"$dbms\"} != 0",
            "legendFormat": "{{datname}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Fetch data (SELECT)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Количество строк, над которыми производились обновления в базе данных PostgreSQL. Используется для отслеживания изменений данных и анализа нагрузки на базу данных.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 12,
          "x": 0,
          "y": 37
        },
        "id": 8,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "sum"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "pg_stat_database_tup_updated{datname=~\"$datname\",source_host=~\"$dbms\"} != 0",
            "legendFormat": "{{datname}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Update data",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Количество удаленных строк в базах данных PostgreSQL. Используется для мониторинга активности удаления данных и выявления аномалий",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": 0
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 12,
          "x": 12,
          "y": 37
        },
        "id": 7,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "sum"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.1.0",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "pg_stat_database_tup_deleted{datname=~\"$datname\", source_host=~\"$dbms\"} != 0",
            "legendFormat": "{{datname}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Delete data",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Количество строк, прочитанных из баз данных PostgreSQL. Используется для анализа нагрузки на чтение и оптимизации запросов",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 12,
          "x": 0,
          "y": 43
        },
        "id": 14,
        "options": {
          "dataLinks": [],
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "sum"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "pg_stat_database_tup_returned{datname=~\"$datname\", source_host=~\"$dbms\"} != 0",
            "legendFormat": "{{datname}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Return data",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Метрика вычисляет cache hit ratio (эффективность кеширования) для баз данных PostgreSQL, показывая долю блоков, полученных из кеша, а не с диска. Используется для оценки производительности СУБД и настройки размера буферного кэша.",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "decimals": 4,
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "percentunit"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 12,
          "x": 12,
          "y": 43
        },
        "id": 62,
        "options": {
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "pg_stat_database_blks_hit{source_host=\"$dbms\",datname=~\"$datname\"}\n  /\n(\n  pg_stat_database_blks_read{source_host=\"$dbms\",datname=~\"$datname\"}\n    +\n  pg_stat_database_blks_hit{source_host=\"$dbms\",datname=~\"$datname\"}\n)",
            "legendFormat": "{{ datname }}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Cache Hit Rate",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Активность фоновых процессов записи (bgwriter) в PostgreSQL, включая аллокацию буферов, запись на диск и контрольные точки. Используются для анализа нагрузки на ввод-вывод и оптимизации производительности СУБД:\n    buffers_alloc – выделение буферов бэкендами\n\n    buffers_backend – запись буферов бэкендами\n\n    buffers_backend_fsync – принудительная синхронизация на диск\n\n    buffers_checkpoint – запись буферов во время контрольных точек\n\n    buffers_clean – очистка буферов фоновым писателем\n\nИспользовать до 65-70% от доступной мощности дисковой подсистемы во избежание перегрузки системы",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 49
        },
        "id": 64,
        "options": {
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "max",
              "min"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_bgwriter_buffers_backend_total{source_host=\"$dbms\"}[5m])",
            "legendFormat": "buffers_backend",
            "range": true,
            "refId": "A"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_bgwriter_buffers_alloc_total{source_host=\"$dbms\"}[5m])",
            "legendFormat": "buffers_alloc",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_bgwriter_buffers_backend_fsync_total{source_host=\"$dbms\"}[5m])",
            "legendFormat": "backend_fsync",
            "range": true,
            "refId": "C"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_bgwriter_buffers_checkpoint_total{source_host=\"$dbms\"}[5m])",
            "legendFormat": "buffers_checkpoint",
            "range": true,
            "refId": "D"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_bgwriter_buffers_clean_total{source_host=\"$dbms\"}[5m])",
            "legendFormat": "buffers_clean",
            "range": true,
            "refId": "E"
          }
        ],
        "title": "Buffers (bgwriter)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Метрики, отслеживающие конфликты (отменённые запросы из-за конфликтов репликации/восстановления) и взаимоблокировки (обнаруженные взаимоблокировки, требующие вмешательства) в базах PostgreSQL, возникающие при конкуренции за ресурсы. Используются для выявления проблем с параллельными транзакциями и оптимизации workload",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "short"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 49
        },
        "id": 66,
        "options": {
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "sum"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_database_conflicts{source_host=\"$dbms\", datname=~\"$datname\"}[5m])",
            "legendFormat": "{{datname}} conflicts",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_database_deadlocks{source_host=\"$dbms\", datname=~\"$datname\"}[5m])",
            "legendFormat": "{{datname}} deadlocks",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Conflicts/Deadlocks",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Общий объем данных, записываемых во временные файлы запросами в этой базе данных. Учитываются все временные файлы, независимо от того, для чего был создан временный файл, и независимо от параметра log_temp_files. Использовать до 5-15% от доступного объема диска во избежание переполнения дискового пространства",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 0,
          "y": 57
        },
        "id": 68,
        "options": {
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "sum"
            ],
            "displayMode": "table",
            "placement": "right",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_database_temp_bytes{source_host=\"$dbms\",datname=~\"$datname\"}[5m])",
            "legendFormat": "{{datname}}",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Temp File (Bytes)",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "victoriametrics-metrics-datasource",
          "uid": "peeper-metrics"
        },
        "description": "Время выполнения контрольных точек (checkpoints) в PostgreSQL, разделяя его на фазу записи на диск (write_time - физическая запись данных на диск) и синхронизации (sync_time - время принудительной синхронизации данных с диском). Используются для диагностики задержек ввода-вывода и настройки интервалов контрольных точек",
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisBorderShow": false,
              "axisCenteredZero": false,
              "axisColorMode": "text",
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "barWidthFactor": 0.6,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "insertNulls": false,
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green"
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "ms"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 16,
          "x": 8,
          "y": 57
        },
        "id": 70,
        "options": {
          "legend": {
            "calcs": [
              "mean",
              "lastNotNull",
              "max",
              "min"
            ],
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "hideZeros": false,
            "mode": "multi",
            "sort": "none"
          }
        },
        "pluginVersion": "12.0.2",
        "targets": [
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_bgwriter_checkpoint_write_time_total{source_host=\"$dbms\"}[5m])",
            "legendFormat": "write_time - Total amount of time that has been spent in the portion of checkpoint processing where files are written to disk.",
            "range": true,
            "refId": "B"
          },
          {
            "datasource": {
              "type": "victoriametrics-metrics-datasource",
              "uid": "peeper-metrics"
            },
            "editorMode": "code",
            "expr": "irate(pg_stat_bgwriter_checkpoint_sync_time_total{source_host=\"$dbms\"}[5m])",
            "legendFormat": "sync_time - Total amount of time that has been spent in the portion of checkpoint processing where files are synchronized to disk.",
            "range": true,
            "refId": "A"
          }
        ],
        "title": "Checkpoint Stats",
        "type": "timeseries"
      }
    ],
    "preload": false,
    "refresh": "1m",
    "schemaVersion": 41,
    "tags": [
      "postgres",
      "db",
      "stats"
    ],
    "templating": {
      "list": [
        {
          "allowCustomValue": false,
          "current": {
            "text": "",
            "value": ""
          },
          "datasource": {
            "type": "victoriametrics-metrics-datasource",
            "uid": "peeper-metrics"
          },
          "definition": "query_result(pg_exporter_last_scrape_duration_seconds)",
          "hide": 2,
          "includeAll": false,
          "label": "Namespace",
          "name": "namespace",
          "options": [],
          "query": {
            "qryType": 3,
            "query": "query_result(pg_exporter_last_scrape_duration_seconds)",
            "refId": "VariableQueryEditor-VariableQuery"
          },
          "refresh": 2,
          "regex": "/.*kubernetes_namespace=\"([^\"]+).*/",
          "sort": 1,
          "type": "query"
        },
        {
          "allowCustomValue": false,
          "current": {
            "text": "",
            "value": ""
          },
          "datasource": {
            "type": "victoriametrics-metrics-datasource",
            "uid": "peeper-metrics"
          },
          "definition": "query_result(pg_exporter_last_scrape_duration_seconds{kubernetes_namespace=\"$namespace\"})",
          "hide": 2,
          "includeAll": false,
          "label": "Release",
          "name": "release",
          "options": [],
          "query": {
            "qryType": 3,
            "query": "query_result(pg_exporter_last_scrape_duration_seconds{kubernetes_namespace=\"$namespace\"})",
            "refId": "VariableQueryEditor-VariableQuery"
          },
          "refresh": 2,
          "regex": "/.*release=\"([^\"]+)/",
          "sort": 1,
          "type": "query"
        },
        {
          "allowCustomValue": false,
          "current": {
            "text": "ws-eccm-test",
            "value": "ws-eccm-test"
          },
          "definition": "label_values(pg_up,host)",
          "label": "Host",
          "name": "host",
          "options": [],
          "query": {
            "qryType": 1,
            "query": "label_values(pg_up,host)",
            "refId": "VariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "sort": 1,
          "type": "query"
        },
        {
          "allowCustomValue": false,
          "current": {
            "text": "postgres-eccm",
            "value": "postgres-eccm"
          },
          "datasource": {
            "type": "victoriametrics-metrics-datasource",
            "uid": "peeper-metrics"
          },
          "definition": "label_values(pg_up{host=\"$host\"},source_host)",
          "description": "",
          "includeAll": false,
          "label": "DBMS",
          "name": "dbms",
          "options": [],
          "query": {
            "qryType": 1,
            "query": "label_values(pg_up{host=\"$host\"},source_host)",
            "refId": "VariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "sort": 1,
          "type": "query"
        },
        {
          "allowCustomValue": false,
          "current": {
            "text": "All",
            "value": [
              "$__all"
            ]
          },
          "datasource": {
            "type": "victoriametrics-metrics-datasource",
            "uid": "peeper-metrics"
          },
          "definition": "label_values(datname)",
          "includeAll": true,
          "label": "Database",
          "multi": true,
          "name": "datname",
          "options": [],
          "query": {
            "qryType": 1,
            "query": "label_values(datname)",
            "refId": "VariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "sort": 1,
          "type": "query"
        },
        {
          "allowCustomValue": false,
          "current": {
            "text": "All",
            "value": "$__all"
          },
          "datasource": {
            "type": "victoriametrics-metrics-datasource",
            "uid": "peeper-metrics"
          },
          "definition": "label_values({mode=~\"accessexclusivelock|accesssharelock|exclusivelock|rowexclusivelock|rowsharelock|sharelock|sharerowexclusivelock|shareupdateexclusivelock\"},mode)",
          "includeAll": true,
          "label": "Lock table",
          "multi": true,
          "name": "mode",
          "options": [],
          "query": {
            "qryType": 1,
            "query": "label_values({mode=~\"accessexclusivelock|accesssharelock|exclusivelock|rowexclusivelock|rowsharelock|sharelock|sharerowexclusivelock|shareupdateexclusivelock\"},mode)",
            "refId": "VariableQueryEditor-VariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-1h",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "PostgreSQL Database",
    "uid": "postgres"
  }
}
